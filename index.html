<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#fd79a8" />
  <title>ÎùºÏù¥Î∏åÎçîÏÑºÌÖÄ Ï£ºÏ∞®ÏúÑÎ∞ò Ï†úÎ≥¥</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <style>
:root{
  --bg1:#fff7fb;
  --bg2:#f7fbff;
  --card:#ffffff;
  --text:#2b2f3a;
  --muted:#707789;
  --line:rgba(43,47,58,.08);

  /* pastel primary */
  --primary:#ff6aa2;        /* Îî∏Í∏∞ÌïëÌÅ¨ */
  --primary2:#ff4f92;
  --primarySoft:rgba(255,106,162,.14);

  --mint:#34d399;
  --sky:#60a5fa;
  --lemon:#fbbf24;
  --lav:#c084fc;

  --danger:#ff5a7a;
  --success:#16a34a;

  --radius:20px;
  --shadow:0 12px 28px rgba(255,106,162,.10);
  --shadow2:0 10px 22px rgba(15,23,42,.06);
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0;padding:0}

html,body{
  min-height:100%;
  font-family:"Noto Sans KR",-apple-system,BlinkMacSystemFont,system-ui,sans-serif;
  color:var(--text);
  overflow-x:hidden;
  background:
    radial-gradient(520px 320px at 12% 10%, rgba(255,106,162,.16) 0%, transparent 60%),
    radial-gradient(520px 320px at 88% 18%, rgba(96,165,250,.14) 0%, transparent 60%),
    radial-gradient(520px 320px at 20% 92%, rgba(52,211,153,.12) 0%, transparent 60%),
    linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 50%, #ffffff 100%);
}

.screen{
  position:relative;
  padding:18px 16px calc(112px + env(safe-area-inset-bottom));
  max-width:640px;
  margin:0 auto;
}

/* ===== Header ===== */
.header{
  margin:16px 0 12px;
  text-align:left;
}

.header-icon{
  display:inline-flex;
  width:54px;height:54px;
  border-radius:18px;
  align-items:center;justify-content:center;
  font-size:28px;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.85) 0%, rgba(255,255,255,.35) 55%, transparent 65%),
    linear-gradient(135deg, rgba(255,106,162,.35), rgba(96,165,250,.25));
  border:1px solid rgba(255,255,255,.55);
  box-shadow:var(--shadow2);
  margin-bottom:10px;
}

h1{
  font-size:26px;
  font-weight:900;
  letter-spacing:-.6px;
  line-height:1.15;
}

.subtitle{
  margin-top:6px;
  font-size:14px;
  color:var(--muted);
  font-weight:600;
}

/* ===== Banner ===== */
.banner{
  border-radius:24px;
  padding:18px;
  margin:14px 0 18px;
  background:
    radial-gradient(420px 220px at 15% 40%, rgba(255,106,162,.18) 0%, transparent 60%),
    radial-gradient(420px 260px at 85% 60%, rgba(96,165,250,.16) 0%, transparent 62%),
    linear-gradient(135deg, #ffffff 0%, #fff3fa 52%, #f2f8ff 100%);
  border:1px solid rgba(255,255,255,.7);
  box-shadow:var(--shadow);
  position:relative;
  overflow:hidden;
}

.banner::after{
  content:"";
  position:absolute;
  inset:-40px;
  background:
    radial-gradient(circle at 25% 35%, rgba(255,255,255,.55) 0%, transparent 55%),
    radial-gradient(circle at 75% 65%, rgba(255,255,255,.45) 0%, transparent 55%);
  pointer-events:none;
}

.banner-content{position:relative; z-index:1;}

.banner-title{
  font-size:16px;
  font-weight:900;
  letter-spacing:-.3px;
}

.banner-desc{
  margin-top:6px;
  font-size:13px;
  color:var(--muted);
  font-weight:600;
}

/* ===== Section ===== */
.section{
  margin:18px 0 10px;
  font-size:15px;
  font-weight:900;
  letter-spacing:-.2px;
  color:#3a3f4b;
  display:flex;
  align-items:center;
  gap:8px;
}

.section-icon{
  font-size:18px;
  width:26px;height:26px;
  display:inline-flex;
  align-items:center;justify-content:center;
  border-radius:10px;
  background:rgba(255,106,162,.16);
  color:var(--primary2);
}

/* ===== Card ===== */
.card{
  background:rgba(255,255,255,.92);
  backdrop-filter: blur(10px);
  border-radius:22px;
  padding:18px;
  margin-bottom:12px;
  border:1px solid rgba(43,47,58,.06);
  box-shadow:var(--shadow2);
}

label{
  font-weight:900;
  font-size:15px;
  display:flex;
  align-items:center;
  gap:8px;
  letter-spacing:-.2px;
}

.label-icon{
  width:26px;height:26px;
  display:inline-flex;
  align-items:center;justify-content:center;
  border-radius:10px;
  background:rgba(96,165,250,.14);
  color:#2563eb;
  font-size:16px;
}

.hint{
  margin-top:8px;
  font-size:13px;
  color:var(--muted);
  font-weight:600;
  line-height:1.45;
}

/* ===== Inputs ===== */
input[type="text"], textarea{
  width:100%;
  margin-top:12px;
  padding:14px 14px;
  border-radius:16px;
  border:1.5px solid rgba(43,47,58,.10);
  background:rgba(255,255,255,.85);
  font-size:16px; /* iOS Ï§å Î∞©ÏßÄ */
  color:var(--text);
  font-family:inherit;
  transition: border-color .15s ease, box-shadow .15s ease, transform .08s ease;
}

input[type="text"]::placeholder, textarea::placeholder{ color:#9aa2b1; }

input[type="text"]:focus, textarea:focus{
  outline:none;
  border-color:rgba(255,106,162,.55);
  box-shadow:0 0 0 4px rgba(255,106,162,.16);
  background:#fff;
}

textarea{ min-height:110px; resize:vertical; }

/* ===== Buttons ===== */
.btn-row{ display:flex; gap:10px; margin-top:14px; }

.btn{
  flex:1;
  padding:14px 14px;
  border-radius:16px;
  border:1.5px solid rgba(255,106,162,.30);
  background:rgba(255,255,255,.92);
  color:var(--primary2);
  font-weight:900;
  font-size:15px;
  cursor:pointer;
  transition: transform .08s ease, box-shadow .15s ease, background .15s ease;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
}

.btn:hover{
  background:rgba(255,106,162,.10);
  box-shadow:0 10px 22px rgba(255,106,162,.14);
}
.btn:active{ transform:scale(.98); }

/* count pill */
.photo-count{
  display:inline-flex;
  align-items:center;
  gap:6px;
  margin-top:10px;
  padding:8px 12px;
  background:rgba(52,211,153,.12);
  border:1.5px solid rgba(52,211,153,.24);
  border-radius:999px;
  font-size:12px;
  color:#0f766e;
  font-weight:900;
}

/* ===== Previews ===== */
.previews{
  display:flex;
  gap:10px;
  margin-top:14px;
  overflow-x:auto;
  padding-bottom:4px;
  -webkit-overflow-scrolling:touch;
}
.previews::-webkit-scrollbar{ display:none; }

.thumb{
  width:104px;height:104px;
  border-radius:18px;
  overflow:hidden;
  position:relative;
  flex-shrink:0;
  border:2px solid rgba(255,106,162,.16);
  box-shadow:0 12px 24px rgba(15,23,42,.08);
  background:#fff;
}

.thumb img{ width:100%; height:100%; object-fit:cover; }

.thumb button{
  position:absolute;
  top:8px; right:8px;
  width:32px; height:32px;
  border-radius:999px;
  border:none;
  background:rgba(255,90,122,.92);
  color:#fff;
  font-size:18px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 8px 18px rgba(255,90,122,.22);
}

/* ===== Checkbox ===== */
.checkbox-label{
  display:flex;
  align-items:flex-start;
  gap:10px;
  cursor:pointer;
  font-weight:900;
  line-height:1.4;
}

input[type="checkbox"]{
  width:20px;height:20px;
  accent-color:var(--primary2);
  margin-top:2px;
}

/* ===== Bottom CTA ===== */
.bottom{
  position:fixed;
  left:0; right:0; bottom:0;
  padding:10px 14px calc(10px + env(safe-area-inset-bottom));
  background:rgba(255,255,255,.86);
  backdrop-filter: blur(16px);
  border-top:1px solid rgba(43,47,58,.08);
  z-index:100;
}

.bottom-content{ max-width:640px; margin:0 auto; }

.submit{
  width:100%;
  padding:16px 16px;
  border-radius:18px;
  background: linear-gradient(135deg, #ff6aa2 0%, #ff4f92 55%, #ff7ab0 100%);
  color:#fff;
  font-size:16px;
  font-weight:900;
  border:none;
  cursor:pointer;
  box-shadow:0 16px 30px rgba(255,106,162,.22);
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
}

.submit:not(:disabled):active{ transform:scale(.99); }

.submit:disabled{
  opacity:.45;
  background:#cbd5e1;
  box-shadow:none;
  cursor:not-allowed;
}

/* ===== Toast ===== */
.toast{
  margin-top:10px;
  padding:12px 14px;
  border-radius:16px;
  font-size:14px;
  font-weight:900;
  text-align:center;
  background:rgba(16,185,129,.10);
  border:1.5px solid rgba(16,185,129,.20);
  color:#065f46;
}
.toast.error{
  background:rgba(239,68,68,.10);
  border-color:rgba(239,68,68,.20);
  color:#991b1b;
}

/* ===== Spinner ===== */
.spinner{
  width:18px;height:18px;
  border:2px solid rgba(255,255,255,.35);
  border-top-color:#fff;
  border-radius:50%;
  animation: spin .7s linear infinite;
}
@keyframes spin{ to{ transform:rotate(360deg);} }

/* Small phones */
@media (max-width:360px){
  h1{ font-size:24px; }
  .card{ padding:16px; }
  .header-icon{ width:50px;height:50px;border-radius:16px; }
}

/* Desktop */
@media (min-width:768px){
  .screen{ padding:26px 22px calc(110px + env(safe-area-inset-bottom)); }
}

  </style>
</head>

<body>
<div id="root"></div>

<script>
const API_URL = "https://dawn-frost-9b1a.wlasqqq.workers.dev/api/report";

const {useState, useRef, useMemo} = React;

function App() {
  const fileRef = useRef();
  const [pickMode, setPickMode] = useState("camera");

  const [location, setLocation] = useState("");
  const [plate, setPlate] = useState("");
  const [note, setNote] = useState("");
  const [files, setFiles] = useState([]);
  const [agree, setAgree] = useState(false);
  const [loading, setLoading] = useState(false);
  const [toast, setToast] = useState("");
  const [toastType, setToastType] = useState("success");

  const canSubmit = useMemo(
    () => location && plate && files.length && agree && !loading,
    [location, plate, files, agree, loading]
  );

  function onFiles(e) {
    setFiles(prev => [...prev, ...Array.from(e.target.files)]);
    e.target.value = "";
  }

  function remove(idx) {
    setFiles(f => f.filter((_, i) => i !== idx));
  }

  function toBase64(f) {
    return new Promise(r => {
      const fr = new FileReader();
      fr.onload = () => r(fr.result);
      fr.readAsDataURL(f);
    });
  }

  async function submit() {
    setLoading(true);
    setToast("");
    try {
      const images = [];
      for (const f of files) images.push(await toBase64(f));

      await fetch(API_URL, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
          location,
          plate,
          note,
          images,
          ip: "-"
        })
      });

      setToastType("success");
      setToast("‚úÖ Ï†ëÏàòÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!");
      setLocation("");
      setPlate("");
      setNote("");
      setFiles([]);
      setAgree(false);
      
      setTimeout(() => setToast(""), 3000);
    } catch (e) {
      setToastType("error");
      setToast("‚ùå Ï†úÏ∂úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.");
    } finally {
      setLoading(false);
    }
  }

  return React.createElement("div", {className: "screen"},
    React.createElement("div", {className: "header"},
      React.createElement("div", {className: "header-icon"}, "üö´"),
      React.createElement("h1", null, "ÎùºÏù¥Î∏åÎçîÏÑºÌÖÄ Ï£ºÏ∞®ÏúÑÎ∞ò Ï†úÎ≥¥"),
      React.createElement("div", {className: "subtitle"}, "ÏïàÏ†ÑÌïú Ï£ºÏ∞®Î¨∏ÌôîÎ•º ÎßåÎì§Ïñ¥Í∞ëÎãàÎã§")
    ),

    React.createElement("div", {className: "banner"},
      React.createElement("div", {className: "banner-content"},
        React.createElement("div", {className: "banner-title"}, "Live the Centum"),
        React.createElement("div", {className: "banner-desc"}, "Î∂àÎ≤ï Ï£ºÏ∞® Î∞è ÏúÑÎ∞ò ÏÇ¨Ìï≠ÏùÑ Ï†úÎ≥¥Ìï¥Ï£ºÏÑ∏Ïöî")
      )
    ),

    React.createElement("div", {className: "section"},
      React.createElement("span", {className: "section-icon"}, "üìã"),
      "Ïã†Í≥† ÎÇ¥Ïö©"
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", null,
        React.createElement("span", {className: "label-icon"}, "üìç"),
        "ÏúÑÏπò"
      ),
      React.createElement("div", {className: "hint"}, "Îèô¬∑Ï∏µ¬∑Íµ¨Ïó≠ÏùÑ Íµ¨Ï≤¥Ï†ÅÏúºÎ°ú ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"),
      React.createElement("input", {
        type: "text",
        value: location,
        onChange: e => setLocation(e.target.value),
        placeholder: "Ïòà: 101Îèô B2Ï∏µ AÍµ¨Ïó≠"
      })
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", null,
        React.createElement("span", {className: "label-icon"}, "üöó"),
        "Ï∞®ÎüâÎ≤àÌò∏"
      ),
      React.createElement("input", {
        type: "text",
        value: plate,
        onChange: e => setPlate(e.target.value),
        placeholder: "Ïòà: 12Í∞Ä3456"
      })
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", null,
        React.createElement("span", {className: "label-icon"}, "üì∏"),
        "Ïã§ÏãúÍ∞Ñ ÏÇ¨ÏßÑ Ï¥¨ÏòÅ"
      ),
      React.createElement("div", {className: "hint"}, "ÌòÑÏû•ÏóêÏÑú ÏßÅÏ†ë Ï¥¨ÏòÅÌïú ÏÇ¨ÏßÑÎßå Ï≤®Î∂Ä Í∞ÄÎä•Ìï©ÎãàÎã§"),
      files.length > 0 && React.createElement("div", {className: "photo-count"},
        `üìé ${files.length}Ïû•Ïùò ÏÇ¨ÏßÑÏù¥ Ï≤®Î∂ÄÎêòÏóàÏäµÎãàÎã§`
      ),
      React.createElement("button", {
        className: "btn",
        style: {marginTop: "14px", width: "100%"},
        onClick: () => {
          setPickMode("camera");
          fileRef.current.click();
        }
      }, "üì∑ ÏßÄÍ∏à Ï¥¨ÏòÅÌïòÍ∏∞"),
      React.createElement("input", {
        ref: fileRef,
        type: "file",
        accept: "image/*",
        multiple: true,
        capture: "environment",
        onChange: onFiles,
        style: {display: "none"}
      }),
      React.createElement("div", {className: "previews"},
        files.map((f, i) =>
          React.createElement("div", {className: "thumb", key: i},
            React.createElement("img", {src: URL.createObjectURL(f)}),
            React.createElement("button", {onClick: () => remove(i)}, "√ó")
          )
        )
      )
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", null,
        React.createElement("span", {className: "label-icon"}, "üìù"),
        "ÎπÑÍ≥† (ÏÑ†ÌÉùÏÇ¨Ìï≠)"
      ),
      React.createElement("textarea", {
        value: note,
        onChange: e => setNote(e.target.value),
        placeholder: "Ï∂îÍ∞ÄÎ°ú Ï†ÑÎã¨Ìï† ÎÇ¥Ïö©Ïù¥ ÏûàÎã§Î©¥ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"
      })
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", {className: "checkbox-label"},
        React.createElement("input", {
          type: "checkbox",
          checked: agree,
          onChange: e => setAgree(e.target.checked)
        }),
        "Ï¶ùÍ±∞ Ï†úÍ≥µÏóê ÎèôÏùòÌï©ÎãàÎã§"
      ),
      React.createElement("div", {className: "hint", style: {marginTop: "12px"}},
        `‚úì ÏúÑÏπò: ${location ? 'ÏûÖÎ†•Îê®' : 'ÎØ∏ÏûÖÎ†•'} | Ï∞®ÎüâÎ≤àÌò∏: ${plate ? 'ÏûÖÎ†•Îê®' : 'ÎØ∏ÏûÖÎ†•'} | ÏÇ¨ÏßÑ: ${files.length}Ïû• | ÎèôÏùò: ${agree ? 'ÏôÑÎ£å' : 'ÌïÑÏöî'}`
      )
    ),

    React.createElement("div", {className: "bottom"},
      React.createElement("div", {className: "bottom-content"},
        React.createElement("button", {
          className: "submit",
          disabled: !canSubmit,
          onClick: submit
        },
          loading && React.createElement("div", {className: "spinner"}),
          loading ? "Ï†úÏ∂ú Ï§ë..." : "üöÄ Ïã†Í≥† Ï†úÏ∂úÌïòÍ∏∞"
        ),
        toast && React.createElement("div", {className: `toast ${toastType}`}, toast)
      )
    )
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(App));
</script>
</body>
</html>
