<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#fd79a8" />
  <title>ë¼ì´ë¸Œë”ì„¼í…€ ì£¼ì°¨ìœ„ë°˜ ì œë³´</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <style>
:root{
  --bg1:#fff9fc;
  --bg2:#f6fbff;
  --card:#ffffff;
  --text:#374151;
  --muted:#6b7280;

  /* candy pastel */
  --pink:#ff8fb1;
  --pink2:#ff6fa1;
  --sky:#7cc4ff;
  --mint:#6ee7b7;
  --lemon:#fde68a;
  --lav:#d8b4fe;

  --danger:#ff6b8a;
  --success:#22c55e;

  --radius:22px;
  --radius-sm:16px;

  --shadow:0 14px 30px rgba(255,143,177,.18);
  --shadow-soft:0 8px 18px rgba(0,0,0,.06);
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0;padding:0}

html,body{
  min-height:100%;
  font-family:"Noto Sans KR",-apple-system,BlinkMacSystemFont,system-ui,sans-serif;
  color:var(--text);
  overflow-x:hidden;
  background:
    radial-gradient(500px 300px at 10% 8%, rgba(255,143,177,.22) 0%, transparent 60%),
    radial-gradient(520px 320px at 90% 12%, rgba(124,196,255,.22) 0%, transparent 60%),
    radial-gradient(520px 320px at 20% 92%, rgba(110,231,183,.20) 0%, transparent 60%),
    linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 55%, #ffffff 100%);
}

.screen{
  position:relative;
  padding:18px 16px calc(120px + env(safe-area-inset-bottom));
  max-width:640px;
  margin:0 auto;
}

/* ===== Header ===== */
.header{
  margin:14px 0 10px;
  text-align:left;
}

.header-icon{
  display:inline-flex;
  width:56px;height:56px;
  border-radius:20px;
  align-items:center;justify-content:center;
  font-size:30px;
  background:
    radial-gradient(circle at 30% 30%, #fff 0%, rgba(255,255,255,.4) 55%, transparent 65%),
    linear-gradient(135deg, var(--pink), var(--sky));
  box-shadow:var(--shadow);
  margin-bottom:10px;
}

h1{
  font-size:26px;
  font-weight:900;
  letter-spacing:-.6px;
  line-height:1.15;
}

.subtitle{
  margin-top:6px;
  font-size:14px;
  color:var(--muted);
  font-weight:600;
}

/* ===== Banner ===== */
.banner{
  border-radius:26px;
  padding:18px;
  margin:14px 0 18px;
  background:
    radial-gradient(420px 220px at 15% 40%, rgba(255,143,177,.35) 0%, transparent 60%),
    radial-gradient(420px 260px at 85% 60%, rgba(124,196,255,.30) 0%, transparent 62%),
    linear-gradient(135deg, #ffffff 0%, #fff0f7 52%, #f0f7ff 100%);
  border:2px solid rgba(255,255,255,.8);
  box-shadow:var(--shadow);
  position:relative;
  overflow:hidden;
}

.banner::after{
  content:"";
  position:absolute;
  inset:-40px;
  background:
    radial-gradient(circle at 25% 35%, rgba(255,255,255,.6) 0%, transparent 55%),
    radial-gradient(circle at 75% 65%, rgba(255,255,255,.5) 0%, transparent 55%);
  pointer-events:none;
}

.banner-title{
  font-size:16px;
  font-weight:900;
}

.banner-desc{
  margin-top:6px;
  font-size:13px;
  color:var(--muted);
  font-weight:600;
}

/* ===== Section ===== */
.section{
  margin:18px 0 10px;
  font-size:15px;
  font-weight:900;
  color:#374151;
  display:flex;
  align-items:center;
  gap:8px;
}

.section-icon{
  width:28px;height:28px;
  border-radius:10px;
  display:inline-flex;
  align-items:center;justify-content:center;
  background:linear-gradient(135deg, var(--lemon), var(--mint));
  font-size:16px;
}

/* ===== Card ===== */
.card{
  background:rgba(255,255,255,.95);
  border-radius:24px;
  padding:18px;
  margin-bottom:12px;
  border:2px solid rgba(255,143,177,.20);
  box-shadow:var(--shadow-soft);
}

label{
  font-weight:900;
  font-size:15px;
  display:flex;
  align-items:center;
  gap:8px;
}

.label-icon{
  width:28px;height:28px;
  border-radius:10px;
  display:inline-flex;
  align-items:center;justify-content:center;
  background:linear-gradient(135deg, var(--sky), var(--lav));
  font-size:16px;
}

.hint{
  margin-top:8px;
  font-size:13px;
  color:var(--muted);
  font-weight:600;
}

/* ===== Inputs ===== */
input[type="text"], textarea{
  width:100%;
  margin-top:12px;
  padding:14px 16px;
  border-radius:18px;
  border:2px solid rgba(255,143,177,.25);
  background:#ffffff;
  font-size:16px;
  color:var(--text);
  transition:.15s ease;
}

input[type="text"]:focus, textarea:focus{
  outline:none;
  border-color:var(--pink);
  box-shadow:0 0 0 4px rgba(255,143,177,.25);
}

textarea{ min-height:110px; }

/* ===== Buttons ===== */
.btn{
  width:100%;
  padding:16px;
  border-radius:18px;
  border:none;
  background:linear-gradient(135deg, var(--pink), var(--pink2));
  color:#fff;
  font-weight:900;
  font-size:15px;
  box-shadow:0 14px 26px rgba(255,143,177,.35);
}

.btn:active{ transform:scale(.97); }

/* ===== Count pill ===== */
.photo-count{
  display:inline-flex;
  gap:6px;
  margin-top:10px;
  padding:8px 14px;
  background:linear-gradient(135deg, var(--mint), var(--lemon));
  border-radius:999px;
  font-size:12px;
  font-weight:900;
  color:#065f46;
}

/* ===== Previews ===== */
.previews{
  display:flex;
  gap:12px;
  margin-top:14px;
  overflow-x:auto;
}
.previews::-webkit-scrollbar{ display:none; }

.thumb{
  width:104px;height:104px;
  border-radius:22px;
  overflow:hidden;
  position:relative;
  border:3px solid rgba(255,143,177,.35);
  box-shadow:var(--shadow-soft);
}

.thumb img{ width:100%; height:100%; object-fit:cover; }

.thumb button{
  position:absolute;
  top:6px; right:6px;
  width:32px; height:32px;
  border-radius:999px;
  border:none;
  background:linear-gradient(135deg, var(--danger), #ff8fab);
  color:#fff;
  font-size:18px;
}

/* ===== Checkbox ===== */
.checkbox-label{
  display:flex;
  gap:10px;
  font-weight:900;
}

input[type="checkbox"]{
  width:20px;height:20px;
  accent-color:var(--pink2);
}

/* ===== Bottom CTA ===== */
.bottom{
  position:fixed;
  left:0; right:0; bottom:0;
  padding:12px 14px calc(12px + env(safe-area-inset-bottom));
  background:rgba(255,255,255,.9);
  backdrop-filter: blur(16px);
  border-top:2px solid rgba(255,143,177,.25);
}

.submit{
  width:100%;
  padding:18px;
  border-radius:22px;
  background:
    linear-gradient(135deg, var(--pink), var(--pink2));
  color:#fff;
  font-size:17px;
  font-weight:900;
  box-shadow:0 18px 34px rgba(255,143,177,.45);
  border:none;
}

.submit:disabled{
  background:#d1d5db;
  box-shadow:none;
  opacity:.6;
}

/* ===== Toast ===== */
.toast{
  margin-top:10px;
  padding:12px 14px;
  border-radius:18px;
  font-size:14px;
  font-weight:900;
  background:linear-gradient(135deg, var(--mint), #bbf7d0);
  color:#065f46;
}
.toast.error{
  background:linear-gradient(135deg, #fecaca, #ffe4e6);
  color:#991b1b;
}

  </style>
</head>

<body>
<div id="root"></div>

<script>
const API_URL = "https://dawn-frost-9b1a.wlasqqq.workers.dev/api/report";

const {useState, useRef, useMemo} = React;

function App() {
  const fileRef = useRef();
  const [pickMode, setPickMode] = useState("camera");

  const [location, setLocation] = useState("");
  const [plate, setPlate] = useState("");
  const [note, setNote] = useState("");
  const [files, setFiles] = useState([]);
  const [agree, setAgree] = useState(false);
  const [loading, setLoading] = useState(false);
  const [toast, setToast] = useState("");
  const [toastType, setToastType] = useState("success");

  const canSubmit = useMemo(
    () => location && plate && files.length && agree && !loading,
    [location, plate, files, agree, loading]
  );

  function onFiles(e) {
    setFiles(prev => [...prev, ...Array.from(e.target.files)]);
    e.target.value = "";
  }

  function remove(idx) {
    setFiles(f => f.filter((_, i) => i !== idx));
  }

  function toBase64(f) {
    return new Promise(r => {
      const fr = new FileReader();
      fr.onload = () => r(fr.result);
      fr.readAsDataURL(f);
    });
  }

  async function submit() {
    setLoading(true);
    setToast("");
    try {
      const images = [];
      for (const f of files) images.push(await toBase64(f));

      await fetch(API_URL, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
          location,
          plate,
          note,
          images,
          ip: "-"
        })
      });

      setToastType("success");
      setToast("âœ… ì ‘ìˆ˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
      setLocation("");
      setPlate("");
      setNote("");
      setFiles([]);
      setAgree(false);
      
      setTimeout(() => setToast(""), 3000);
    } catch (e) {
      setToastType("error");
      setToast("âŒ ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
    } finally {
      setLoading(false);
    }
  }

  return React.createElement("div", {className: "screen"},
    React.createElement("div", {className: "header"},
      React.createElement("div", {className: "header-icon"}, "ğŸš«"),
      React.createElement("h1", null, "ë¼ì´ë¸Œë”ì„¼í…€ ì£¼ì°¨ìœ„ë°˜ ì œë³´"),
      React.createElement("div", {className: "subtitle"}, "ì•ˆì „í•œ ì£¼ì°¨ë¬¸í™”ë¥¼ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤")
    ),

    React.createElement("div", {className: "banner"},
      React.createElement("div", {className: "banner-content"},
        React.createElement("div", {className: "banner-title"}, "Live the Centum"),
        React.createElement("div", {className: "banner-desc"}, "ë¶ˆë²• ì£¼ì°¨ ë° ìœ„ë°˜ ì‚¬í•­ì„ ì œë³´í•´ì£¼ì„¸ìš”")
      )
    ),

    React.createElement("div", {className: "section"},
      React.createElement("span", {className: "section-icon"}, "ğŸ“‹"),
      "ì‹ ê³  ë‚´ìš©"
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", null,
        React.createElement("span", {className: "label-icon"}, "ğŸ“"),
        "ìœ„ì¹˜"
      ),
      React.createElement("div", {className: "hint"}, "ë™Â·ì¸µÂ·êµ¬ì—­ì„ êµ¬ì²´ì ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”"),
      React.createElement("input", {
        type: "text",
        value: location,
        onChange: e => setLocation(e.target.value),
        placeholder: "ì˜ˆ: 101ë™ B2ì¸µ Aêµ¬ì—­"
      })
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", null,
        React.createElement("span", {className: "label-icon"}, "ğŸš—"),
        "ì°¨ëŸ‰ë²ˆí˜¸"
      ),
      React.createElement("input", {
        type: "text",
        value: plate,
        onChange: e => setPlate(e.target.value),
        placeholder: "ì˜ˆ: 12ê°€3456"
      })
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", null,
        React.createElement("span", {className: "label-icon"}, "ğŸ“¸"),
        "ì‹¤ì‹œê°„ ì‚¬ì§„ ì´¬ì˜"
      ),
      React.createElement("div", {className: "hint"}, "í˜„ì¥ì—ì„œ ì§ì ‘ ì´¬ì˜í•œ ì‚¬ì§„ë§Œ ì²¨ë¶€ ê°€ëŠ¥í•©ë‹ˆë‹¤"),
      files.length > 0 && React.createElement("div", {className: "photo-count"},
        `ğŸ“ ${files.length}ì¥ì˜ ì‚¬ì§„ì´ ì²¨ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤`
      ),
      React.createElement("button", {
        className: "btn",
        style: {marginTop: "14px", width: "100%"},
        onClick: () => {
          setPickMode("camera");
          fileRef.current.click();
        }
      }, "ğŸ“· ì§€ê¸ˆ ì´¬ì˜í•˜ê¸°"),
      React.createElement("input", {
        ref: fileRef,
        type: "file",
        accept: "image/*",
        multiple: true,
        capture: "environment",
        onChange: onFiles,
        style: {display: "none"}
      }),
      React.createElement("div", {className: "previews"},
        files.map((f, i) =>
          React.createElement("div", {className: "thumb", key: i},
            React.createElement("img", {src: URL.createObjectURL(f)}),
            React.createElement("button", {onClick: () => remove(i)}, "Ã—")
          )
        )
      )
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", null,
        React.createElement("span", {className: "label-icon"}, "ğŸ“"),
        "ë¹„ê³  (ì„ íƒì‚¬í•­)"
      ),
      React.createElement("textarea", {
        value: note,
        onChange: e => setNote(e.target.value),
        placeholder: "ì¶”ê°€ë¡œ ì „ë‹¬í•  ë‚´ìš©ì´ ìˆë‹¤ë©´ ì…ë ¥í•´ì£¼ì„¸ìš”"
      })
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", {className: "checkbox-label"},
        React.createElement("input", {
          type: "checkbox",
          checked: agree,
          onChange: e => setAgree(e.target.checked)
        }),
        "ì¦ê±° ì œê³µì— ë™ì˜í•©ë‹ˆë‹¤"
      ),
      React.createElement("div", {className: "hint", style: {marginTop: "12px"}},
        `âœ“ ìœ„ì¹˜: ${location ? 'ì…ë ¥ë¨' : 'ë¯¸ì…ë ¥'} | ì°¨ëŸ‰ë²ˆí˜¸: ${plate ? 'ì…ë ¥ë¨' : 'ë¯¸ì…ë ¥'} | ì‚¬ì§„: ${files.length}ì¥ | ë™ì˜: ${agree ? 'ì™„ë£Œ' : 'í•„ìš”'}`
      )
    ),

    React.createElement("div", {className: "bottom"},
      React.createElement("div", {className: "bottom-content"},
        React.createElement("button", {
          className: "submit",
          disabled: !canSubmit,
          onClick: submit
        },
          loading && React.createElement("div", {className: "spinner"}),
          loading ? "ì œì¶œ ì¤‘..." : "ğŸš€ ì‹ ê³  ì œì¶œí•˜ê¸°"
        ),
        toast && React.createElement("div", {className: `toast ${toastType}`}, toast)
      )
    )
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(App));
</script>
</body>
</html>
