<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#fd79a8" />
  <title>ë¼ì´ë¸Œë”ì„¼í…€ ì£¼ì°¨ìœ„ë°˜ ì œë³´</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <style>
:root{
  --bg:#f6f7fb;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --line:rgba(15,23,42,.08);

  --primary:#111827;       /* ë©”ì¸ ë²„íŠ¼ ì»¬ëŸ¬ */
  --primary-2:#0b1220;
  --accent:#3b82f6;        /* í¬ì¸íŠ¸(í•„ìš” ì‹œë§Œ) */
  --danger:#ef4444;
  --success:#10b981;

  --radius:18px;
  --shadow:0 10px 30px rgba(15,23,42,.06);
  --shadow2:0 6px 18px rgba(15,23,42,.06);
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0;padding:0}

html,body{
  background:var(--bg);
  min-height:100%;
  font-family:"Noto Sans KR",-apple-system,BlinkMacSystemFont,system-ui,sans-serif;
  color:var(--text);
  overflow-x:hidden;
}

/* ê³¼í•œ ë°°ê²½ ì¥ì‹ ì œê±° (ê¹”ë”í•˜ê²Œ) */
body::before, body::after{ content:none; }

.screen{
  position:relative;
  padding:18px 16px calc(108px + env(safe-area-inset-bottom));
  max-width:640px;
  margin:0 auto;
}

/* ===== Header ===== */
.header{
  display:flex;
  flex-direction:column;
  gap:6px;
  margin:14px 0 14px;
  text-align:left;
}

.header-icon{ display:none; } /* ì´ëª¨ì§€ ì•„ì´ì½˜ ìˆ¨ê¹€ (ì›í•˜ë©´ ì£¼ì„ í•´ì œ) */

h1{
  font-size:26px;
  font-weight:900;
  letter-spacing:-.6px;
  line-height:1.15;
}

.subtitle{
  font-size:14px;
  color:var(--muted);
  font-weight:600;
}

/* ===== Banner ===== */
.banner{
  border-radius:22px;
  padding:18px;
  margin:14px 0 18px;
  background:
    radial-gradient(420px 220px at 10% 30%, rgba(59,130,246,.16) 0%, transparent 60%),
    radial-gradient(420px 260px at 90% 70%, rgba(16,185,129,.10) 0%, transparent 62%),
    linear-gradient(135deg, #ffffff 0%, #f3f6ff 48%, #f7fff9 100%);
  border:1px solid rgba(15,23,42,.08);
  box-shadow:var(--shadow2);
  overflow:hidden;
}

.banner::before{ content:none; }

.banner-title{
  font-size:16px;
  font-weight:900;
  letter-spacing:-.4px;
}

.banner-desc{
  margin-top:6px;
  font-size:13px;
  color:var(--muted);
  font-weight:600;
}

/* ===== Section ===== */
.section{
  margin:18px 0 10px;
  font-size:15px;
  font-weight:900;
  letter-spacing:-.3px;
  color:#334155;
  display:flex;
  align-items:center;
  gap:8px;
}
.section-icon{ display:none; } /* ì„¹ì…˜ ì´ëª¨ì§€ ìˆ¨ê¹€ */

/* ===== Card ===== */
.card{
  background:var(--card);
  border-radius:22px;
  padding:18px;
  margin-bottom:12px;
  border:1px solid rgba(15,23,42,.08);
  box-shadow:var(--shadow);
}

.card:hover{ transform:none; box-shadow:var(--shadow); border-color:rgba(15,23,42,.10); }

/* ì• ë‹ˆë©”ì´ì…˜ ì œê±°: ëª¨ë°”ì¼ì—ì„œ ë” ê³ ê¸‰ìŠ¤ëŸ½ê²Œ ë³´ì„ */
@keyframes fadeIn{}
@keyframes fadeInUp{}
@keyframes slideUp{}
@keyframes spin{}

label{
  font-weight:900;
  font-size:15px;
  display:flex;
  align-items:center;
  gap:8px;
  letter-spacing:-.2px;
}
.label-icon{ display:none; } /* ë¼ë²¨ ì´ëª¨ì§€ ìˆ¨ê¹€ */

.hint{
  margin-top:8px;
  font-size:13px;
  color:var(--muted);
  font-weight:600;
  line-height:1.45;
}

/* ===== Inputs ===== */
input[type="text"], textarea{
  width:100%;
  margin-top:12px;
  padding:14px 14px;
  border-radius:16px;
  border:1px solid rgba(15,23,42,.10);
  background:#fff;
  font-size:16px; /* iOS ì¤Œ ë°©ì§€ */
  color:var(--text);
  font-family:inherit;
  transition:border-color .15s ease, box-shadow .15s ease;
}

input[type="text"]:focus, textarea:focus{
  outline:none;
  border-color:rgba(59,130,246,.45);
  box-shadow:0 0 0 4px rgba(59,130,246,.12);
}

textarea{ min-height:110px; resize:vertical; }

/* ===== Buttons ===== */
.btn-row{ display:flex; gap:10px; margin-top:14px; }

.btn{
  flex:1;
  padding:14px 14px;
  border-radius:16px;
  border:1px solid rgba(15,23,42,.10);
  background:#fff;
  color:var(--text);
  font-weight:900;
  font-size:15px;
  cursor:pointer;
  transition:transform .08s ease, box-shadow .15s ease, border-color .15s ease;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
}

.btn:hover{ background:#fff; color:var(--text); box-shadow:0 6px 16px rgba(15,23,42,.08); border-color:rgba(15,23,42,.14); }
.btn:active{ transform:scale(.98); }

/* ë„ˆ ì½”ë“œì—ì„œ ì‚¬ì§„ ë²„íŠ¼ì„ ë‹¨ë…ìœ¼ë¡œ ì“°ê³  ìˆì–´ì„œ width:100% ì£¼ëŠ” styleì´ ìˆëŠ”ë°,
   ë²„íŠ¼ ìì²´ ë””ìì¸ë§Œ ê³ ê¸‰ìŠ¤ëŸ½ê²Œ ë³€ê²½ */
.photo-count{
  display:inline-flex;
  align-items:center;
  gap:6px;
  margin-top:10px;
  padding:8px 12px;
  background:rgba(59,130,246,.10);
  border:1px solid rgba(59,130,246,.20);
  border-radius:999px;
  font-size:12px;
  color:#1e40af;
  font-weight:800;
}

/* ===== Previews ===== */
.previews{
  display:flex;
  gap:10px;
  margin-top:14px;
  overflow-x:auto;
  padding-bottom:4px;
  -webkit-overflow-scrolling:touch;
}
.previews::-webkit-scrollbar{ display:none; }

.thumb{
  width:104px;height:104px;
  border-radius:16px;
  overflow:hidden;
  position:relative;
  flex-shrink:0;
  border:1px solid rgba(15,23,42,.10);
  box-shadow:0 6px 16px rgba(15,23,42,.06);
}
.thumb:hover{ transform:none; }

.thumb img{ width:100%; height:100%; object-fit:cover; }

.thumb button{
  position:absolute;
  top:8px; right:8px;
  width:32px; height:32px;
  border-radius:999px;
  border:none;
  background:rgba(15,23,42,.78);
  color:#fff;
  font-size:18px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ===== Checkbox ===== */
.checkbox-label{
  display:flex;
  align-items:flex-start;
  gap:10px;
  cursor:pointer;
  font-weight:800;
  line-height:1.4;
}

input[type="checkbox"]{
  width:20px;height:20px;
  accent-color:var(--primary);
  margin-top:2px;
}

/* ===== Bottom CTA ===== */
.bottom{
  position:fixed;
  left:0; right:0; bottom:0;
  padding:10px 14px calc(10px + env(safe-area-inset-bottom));
  background:rgba(246,247,251,.92);
  backdrop-filter: blur(14px);
  border-top:1px solid rgba(15,23,42,.10);
  z-index:100;
}

.bottom-content{
  max-width:640px;
  margin:0 auto;
}

.submit{
  width:100%;
  padding:16px 16px;
  border-radius:18px;
  background:var(--primary);
  color:#fff;
  font-size:16px;
  font-weight:900;
  border:none;
  cursor:pointer;
  box-shadow:0 10px 26px rgba(15,23,42,.18);
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
}

.submit:not(:disabled):active{ transform:scale(.99); }
.submit:disabled{
  opacity:.35;
  background:#94a3b8;
  box-shadow:none;
  cursor:not-allowed;
}

/* ===== Toast ===== */
.toast{
  margin-top:10px;
  padding:12px 14px;
  border-radius:16px;
  font-size:14px;
  font-weight:800;
  text-align:center;
  background:rgba(16,185,129,.10);
  border:1px solid rgba(16,185,129,.20);
  color:#065f46;
}

.toast.error{
  background:rgba(239,68,68,.10);
  border-color:rgba(239,68,68,.20);
  color:#991b1b;
}

/* ===== Spinner ===== */
.spinner{
  width:18px;height:18px;
  border:2px solid rgba(255,255,255,.35);
  border-top-color:#fff;
  border-radius:50%;
  animation: spin .7s linear infinite;
}
@keyframes spin{ to{ transform:rotate(360deg); } }

/* Small phones */
@media (max-width:360px){
  h1{ font-size:24px; }
  .card{ padding:16px; }
}

/* Desktop */
@media (min-width:768px){
  .screen{ padding:26px 22px calc(110px + env(safe-area-inset-bottom)); }
}

  </style>
</head>

<body>
<div id="root"></div>

<script>
const API_URL = "https://dawn-frost-9b1a.wlasqqq.workers.dev/api/report";

const {useState, useRef, useMemo} = React;

function App() {
  const fileRef = useRef();
  const [pickMode, setPickMode] = useState("camera");

  const [location, setLocation] = useState("");
  const [plate, setPlate] = useState("");
  const [note, setNote] = useState("");
  const [files, setFiles] = useState([]);
  const [agree, setAgree] = useState(false);
  const [loading, setLoading] = useState(false);
  const [toast, setToast] = useState("");
  const [toastType, setToastType] = useState("success");

  const canSubmit = useMemo(
    () => location && plate && files.length && agree && !loading,
    [location, plate, files, agree, loading]
  );

  function onFiles(e) {
    setFiles(prev => [...prev, ...Array.from(e.target.files)]);
    e.target.value = "";
  }

  function remove(idx) {
    setFiles(f => f.filter((_, i) => i !== idx));
  }

  function toBase64(f) {
    return new Promise(r => {
      const fr = new FileReader();
      fr.onload = () => r(fr.result);
      fr.readAsDataURL(f);
    });
  }

  async function submit() {
    setLoading(true);
    setToast("");
    try {
      const images = [];
      for (const f of files) images.push(await toBase64(f));

      await fetch(API_URL, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
          location,
          plate,
          note,
          images,
          ip: "-"
        })
      });

      setToastType("success");
      setToast("âœ… ì ‘ìˆ˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
      setLocation("");
      setPlate("");
      setNote("");
      setFiles([]);
      setAgree(false);
      
      setTimeout(() => setToast(""), 3000);
    } catch (e) {
      setToastType("error");
      setToast("âŒ ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
    } finally {
      setLoading(false);
    }
  }

  return React.createElement("div", {className: "screen"},
    React.createElement("div", {className: "header"},
      React.createElement("div", {className: "header-icon"}, "ğŸš«"),
      React.createElement("h1", null, "ë¼ì´ë¸Œë”ì„¼í…€ ì£¼ì°¨ìœ„ë°˜ ì œë³´"),
      React.createElement("div", {className: "subtitle"}, "ì•ˆì „í•œ ì£¼ì°¨ë¬¸í™”ë¥¼ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤")
    ),

    React.createElement("div", {className: "banner"},
      React.createElement("div", {className: "banner-content"},
        React.createElement("div", {className: "banner-title"}, "Live the Centum"),
        React.createElement("div", {className: "banner-desc"}, "ë¶ˆë²• ì£¼ì°¨ ë° ìœ„ë°˜ ì‚¬í•­ì„ ì œë³´í•´ì£¼ì„¸ìš”")
      )
    ),

    React.createElement("div", {className: "section"},
      React.createElement("span", {className: "section-icon"}, "ğŸ“‹"),
      "ì‹ ê³  ë‚´ìš©"
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", null,
        React.createElement("span", {className: "label-icon"}, "ğŸ“"),
        "ìœ„ì¹˜"
      ),
      React.createElement("div", {className: "hint"}, "ë™Â·ì¸µÂ·êµ¬ì—­ì„ êµ¬ì²´ì ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”"),
      React.createElement("input", {
        type: "text",
        value: location,
        onChange: e => setLocation(e.target.value),
        placeholder: "ì˜ˆ: 101ë™ B2ì¸µ Aêµ¬ì—­"
      })
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", null,
        React.createElement("span", {className: "label-icon"}, "ğŸš—"),
        "ì°¨ëŸ‰ë²ˆí˜¸"
      ),
      React.createElement("input", {
        type: "text",
        value: plate,
        onChange: e => setPlate(e.target.value),
        placeholder: "ì˜ˆ: 12ê°€3456"
      })
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", null,
        React.createElement("span", {className: "label-icon"}, "ğŸ“¸"),
        "ì‹¤ì‹œê°„ ì‚¬ì§„ ì´¬ì˜"
      ),
      React.createElement("div", {className: "hint"}, "í˜„ì¥ì—ì„œ ì§ì ‘ ì´¬ì˜í•œ ì‚¬ì§„ë§Œ ì²¨ë¶€ ê°€ëŠ¥í•©ë‹ˆë‹¤"),
      files.length > 0 && React.createElement("div", {className: "photo-count"},
        `ğŸ“ ${files.length}ì¥ì˜ ì‚¬ì§„ì´ ì²¨ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤`
      ),
      React.createElement("button", {
        className: "btn",
        style: {marginTop: "14px", width: "100%"},
        onClick: () => {
          setPickMode("camera");
          fileRef.current.click();
        }
      }, "ğŸ“· ì§€ê¸ˆ ì´¬ì˜í•˜ê¸°"),
      React.createElement("input", {
        ref: fileRef,
        type: "file",
        accept: "image/*",
        multiple: true,
        capture: "environment",
        onChange: onFiles,
        style: {display: "none"}
      }),
      React.createElement("div", {className: "previews"},
        files.map((f, i) =>
          React.createElement("div", {className: "thumb", key: i},
            React.createElement("img", {src: URL.createObjectURL(f)}),
            React.createElement("button", {onClick: () => remove(i)}, "Ã—")
          )
        )
      )
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", null,
        React.createElement("span", {className: "label-icon"}, "ğŸ“"),
        "ë¹„ê³  (ì„ íƒì‚¬í•­)"
      ),
      React.createElement("textarea", {
        value: note,
        onChange: e => setNote(e.target.value),
        placeholder: "ì¶”ê°€ë¡œ ì „ë‹¬í•  ë‚´ìš©ì´ ìˆë‹¤ë©´ ì…ë ¥í•´ì£¼ì„¸ìš”"
      })
    ),

    React.createElement("div", {className: "card"},
      React.createElement("label", {className: "checkbox-label"},
        React.createElement("input", {
          type: "checkbox",
          checked: agree,
          onChange: e => setAgree(e.target.checked)
        }),
        "ì¦ê±° ì œê³µì— ë™ì˜í•©ë‹ˆë‹¤"
      ),
      React.createElement("div", {className: "hint", style: {marginTop: "12px"}},
        `âœ“ ìœ„ì¹˜: ${location ? 'ì…ë ¥ë¨' : 'ë¯¸ì…ë ¥'} | ì°¨ëŸ‰ë²ˆí˜¸: ${plate ? 'ì…ë ¥ë¨' : 'ë¯¸ì…ë ¥'} | ì‚¬ì§„: ${files.length}ì¥ | ë™ì˜: ${agree ? 'ì™„ë£Œ' : 'í•„ìš”'}`
      )
    ),

    React.createElement("div", {className: "bottom"},
      React.createElement("div", {className: "bottom-content"},
        React.createElement("button", {
          className: "submit",
          disabled: !canSubmit,
          onClick: submit
        },
          loading && React.createElement("div", {className: "spinner"}),
          loading ? "ì œì¶œ ì¤‘..." : "ğŸš€ ì‹ ê³  ì œì¶œí•˜ê¸°"
        ),
        toast && React.createElement("div", {className: `toast ${toastType}`}, toast)
      )
    )
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(App));
</script>
</body>
</html>
